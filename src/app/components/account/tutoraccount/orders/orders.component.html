    <div class="orders-container">
  <h2>Mis Órdenes</h2>
  
  <div class="orders-list" *ngIf="(ordersWithTransactions$ | async) as orders">
    <mat-tab-group>
      <mat-tab label="Autorizadas">
        <ng-container *ngTemplateOutlet="orderTable; context: { orders: getFilteredOrders(orders, 'AUTHORIZED') }"></ng-container>
      </mat-tab>
      <mat-tab label="Rechazadas">
        <ng-container *ngTemplateOutlet="orderTable; context: { orders: getFilteredOrders(orders, 'REJECTED') }"></ng-container>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

<ng-template #orderTable let-orders="orders">
  <div *ngIf="orders.length > 0; else noOrders">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Orden #</th>
            <th>Fecha</th>
            <th>Estado</th>
            <th>Total</th>
            <th>Servicios</th>
            <th>Estado de Pago</th>
            <th>Método de Pago</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders" (click)="openOrderDialog(order)" style="cursor: pointer;">
            <td>{{order.id.slice(0, 6)}}</td>
            <td>{{order.created | date:'medium'}}</td>
            <td>{{order.status}}</td>
            <td>${{order.total}}</td>
            <td>
              <div *ngFor="let item of order.cart">
                {{item.name}}
              </div>
            </td>
            <td>
              <span class="badge" [ngClass]="{
                'badge-success': order.transaction?.status === 'AUTHORIZED',
                'badge-danger': order.transaction?.status === 'REJECTED',
                'badge-warning': !order.transaction?.status || order.transaction?.status === 'PENDING'
              }">
                {{order.transaction?.status || 'PENDIENTE'}}
              </span>
            </td>
            <td>{{order.transaction?.paymentType || 'N/A'}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</ng-template>

<ng-template #noOrders>
  <div class="no-orders">
    <p>No hay órdenes para mostrar</p>
  </div>
</ng-template>

<style>
.orders-container {
  padding: 20px;
}

.table-responsive {
  margin-top: 20px;
}

.badge {
  padding: 5px 10px;
  border-radius: 24px;
  font-weight: 500;
}

.badge-success {
  background-color: #28a745;
  color: white;
}

.badge-danger {
  background-color: #dc3545;
  color: white;
}

.badge-warning {
  background-color: #ffc107;
  color: #212529;
}

.table th, .table td {
  vertical-align: middle;
  padding: 12px;
}

.table thead th {
  border-bottom: 2px solid #dee2e6;
  font-weight: 600;
}

.no-orders {
  text-align: center;
  padding: 20px;
  color: #666;
}
</style>